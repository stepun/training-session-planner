# CLAUDE.md - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –¥–ª—è Claude Code Assistant

## –ü—Ä–∞–≤–∏–ª–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ (–ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û!)

### üîí –ù–∏–∫–æ–≥–¥–∞ –Ω–µ —Ö—Ä–∞–Ω–∏—Ç–µ —Å–µ–∫—Ä–µ—Ç—ã –≤ –∫–æ–¥–µ!

**–ó–ê–ü–†–ï–©–ï–ù–û:**
```typescript
// ‚ùå –ù–ï–ü–†–ê–í–ò–õ–¨–ù–û - —Å–µ–∫—Ä–µ—Ç—ã –ø—Ä—è–º–æ –≤ –∫–æ–¥–µ
const config = {
  apiKey: "sk-1234567890abcdef",
  secretKey: "super-secret-key-123"
}
```

**–ü–†–ê–í–ò–õ–¨–ù–û:**
```typescript
// ‚úÖ –ü–†–ê–í–ò–õ–¨–ù–û - –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
const config = {
  apiKey: process.env.API_KEY || import.meta.env.VITE_API_KEY,
  secretKey: process.env.SECRET_KEY || import.meta.env.VITE_SECRET_KEY
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
if (!config.apiKey || !config.secretKey) {
  throw new Error('API keys not configured. Please set environment variables.')
}
```

### üìù –í—Å–µ–≥–¥–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ .env.example

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ñ–∞–π–ª `.env.example` —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö:

```env
# API Configuration
VITE_API_URL=https://api.example.com
VITE_API_KEY=your_api_key_here
VITE_SECRET_KEY=your_secret_key_here

# Database
DB_HOST=localhost
DB_USER=username
DB_PASSWORD=password
```

### üê≥ Docker –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í `docker-compose.yml` –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```yaml
services:
  app:
    environment:
      - API_KEY=${API_KEY}
      - SECRET_KEY=${SECRET_KEY}
    # –ò–ª–∏ –¥–ª—è Vite –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π:
      - VITE_API_KEY=${VITE_API_KEY}
```

### üö´ –î–æ–±–∞–≤—å—Ç–µ –≤ .gitignore

```gitignore
# Environment variables
.env
.env.local
.env.production

# Credentials
credentials.json
config/secrets.json
```

## –ö–æ–º–∞–Ω–¥—ã –∏ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã –ø—Ä–æ–µ–∫—Ç–∞

### –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫
```bash
# –°–±–æ—Ä–∫–∞ Docker –æ–±—Ä–∞–∑–∞
docker compose build

# –ó–∞–ø—É—Å–∫ –≤ development —Ä–µ–∂–∏–º–µ
docker compose up

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
docker compose ps
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞
```bash
# –õ–∏–Ω—Ç–∏–Ω–≥ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
npm run lint

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–æ–≤ (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)
npm run typecheck

# –¢–µ—Å—Ç—ã (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã)
npm run test
```

## –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

### Frontend (React + TypeScript + Vite)
- **UI**: Tailwind CSS + shadcn/ui
- **State**: Zustand
- **PDF**: @react-pdf/renderer
- **Drag & Drop**: @dnd-kit
- **File Upload**: S3/MinIO integration
- **Support Chat**: UserChat –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –¥–ª—è —Å–≤—è–∑–∏ —Å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º

### Backend (Node.js + Express)
- **Framework**: Express.js
- **Telegram Bot**: node-telegram-bot-api
- **API**: REST endpoints –¥–ª—è —á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **Storage**: In-memory Map (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∑–∞–º–µ–Ω–∏—Ç—å –Ω–∞ –ë–î –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ)

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤
```
training_generator/
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/     # React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GeneralDataForm.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExerciseCard.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ExercisesList.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ TrainingPreview.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ PDFDocument.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ LanguageSwitcher.tsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ UserChat.tsx      # –í–∏–¥–∂–µ—Ç —á–∞—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/               # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ types/          # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ training.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/          # Zustand store
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ trainingStore.ts
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ languageStore.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/          # React hooks
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ useTranslation.ts
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ locales/        # –§–∞–π–ª—ã –ø–µ—Ä–µ–≤–æ–¥–æ–≤
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ru-RU.json
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ en-US.json
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/       # API –∏ –≤–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ App.tsx
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile.dev
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ index.js           # Express —Å–µ—Ä–≤–µ—Ä + Telegram –±–æ—Ç
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile
‚îú‚îÄ‚îÄ docker-compose.yml
‚îî‚îÄ‚îÄ .env
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

**Frontend:**
- `GeneralDataForm` - —Ñ–æ—Ä–º–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏
- `ExerciseCard` - –∫–∞—Ä—Ç–æ—á–∫–∞ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è —Å drag&drop
- `ExercisesList` - —Å–ø–∏—Å–æ–∫ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π
- `TrainingPreview` - –ø—Ä–µ–≤—å—é —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏ —Å –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `PDFDocument` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PDF —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- `LanguageSwitcher` - –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- `UserChat` - –≤–∏–¥–∂–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ —Å —Å–∏–Ω–µ–π –∫–Ω–æ–ø–∫–æ–π –≤ –ø—Ä–∞–≤–æ–º –Ω–∏–∂–Ω–µ–º —É–≥–ª—É

**Backend:**
- Express REST API –Ω–∞ –ø–æ—Ä—Ç—É 3001 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) / 3002 (–≤–Ω–µ—à–Ω–∏–π)
- Telegram Bot —Å polling –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
- In-memory —Ö—Ä–∞–Ω–∏–ª–∏—â–µ —Å–µ—Å—Å–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### –õ–æ–∫–∞–ª–∏–∑–∞—Ü–∏—è
–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏—è–∑—ã—á–Ω–æ—Å—Ç—å:
- `frontend/src/locales/ru-RU.json` - —Ä—É—Å—Å–∫–∏–π —è–∑—ã–∫
- `frontend/src/locales/en-US.json` - –∞–Ω–≥–ª–∏–π—Å–∫–∏–π —è–∑—ã–∫
- `frontend/src/store/languageStore.ts` - Zustand store –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —è–∑—ã–∫–æ–º
- `frontend/src/hooks/useTranslation.ts` - —Ö—É–∫ –¥–ª—è –ø–µ—Ä–µ–≤–æ–¥–æ–≤

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è Preview –∏ PDF
**–í–∞–∂–Ω–æ:** –õ–æ–≥–∏–∫–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –≤ `TrainingPreview.tsx` –∏ `PDFDocument.tsx` –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞!

**–ê–ª–≥–æ—Ä–∏—Ç–º –ø–∞–≥–∏–Ω–∞—Ü–∏–∏:**
1. –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—É—é –≤—ã—Å–æ—Ç—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ë–ï–ó —É—á–µ—Ç–∞ —Ñ—É—Ç–µ—Ä–∞
2. –†–∞–∑–º–µ—â–∞–µ–º —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö –ø–æ –≤—ã—Å–æ—Ç–µ
3. –ü–æ—Å–ª–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ–º: –µ—Å–ª–∏ –æ–¥–Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –ò —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è + —Ñ—É—Ç–µ—Ä –Ω–µ –≤–ª–µ–∑–∞—é—Ç ‚Üí —Å–æ–∑–¥–∞–µ–º –ø—É—Å—Ç—É—é –≤—Ç–æ—Ä—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
4. –§—É—Ç–µ—Ä –≤—Å–µ–≥–¥–∞ –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
5. –ù–∞ –ø—É—Å—Ç—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö (—Ç–æ–ª—å–∫–æ —Å —Ñ—É—Ç–µ—Ä–æ–º) –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫

**–ö–æ–Ω—Å—Ç–∞–Ω—Ç—ã –ø–∞–≥–∏–Ω–∞—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å:**
```typescript
// Preview (px)
const A4_HEIGHT_PX = 1122
const PADDING_PX = 30 * 3.78 * 2  // 227px
const FIRST_PAGE_HEADER_PX = 150
const TOTAL_DURATION_PX = 25

// PDF (points, 1px ‚âà 0.75pt)
const A4_HEIGHT = 842
const PADDING = 30 * 2  // 60pt
const FIRST_PAGE_HEADER = 120
const TOTAL_DURATION_HEIGHT = 35
```

## –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –≤ –∫–æ–¥–µ

### –í–∞–ª–∏–¥–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
```typescript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ñ–∞–π–ª–∞
if (!file.type.startsWith('image/')) {
  throw new Error('Only image files allowed')
}

// –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–º–∞–∫—Å–∏–º—É–º 5MB)
if (file.size > 5 * 1024 * 1024) {
  throw new Error('File size exceeds 5MB limit')
}
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
```typescript
try {
  const result = await riskyOperation()
  return result
} catch (error) {
  console.error('Operation failed:', error)
  // –ù–µ –ª–æ–≥–∏—Ä—É–π—Ç–µ —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ!
  throw new Error('Operation failed')
}
```

## –ü–∞–º—è—Ç–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. **–í—Å–µ–≥–¥–∞** –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
2. **–ù–∏–∫–æ–≥–¥–∞** –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ `.env` —Ñ–∞–π–ª—ã
3. **–í—Å–µ–≥–¥–∞** —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ `.env.example`
4. **–ü—Ä–æ–≤–µ—Ä—è–π—Ç–µ** –Ω–∞–ª–∏—á–∏–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
5. **–í–∞–ª–∏–¥–∏—Ä—É–π—Ç–µ** –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –≤–≤–æ–¥
6. **–û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–π—Ç–µ** —Ä–∞–∑–º–µ—Ä—ã –∑–∞–≥—Ä—É–∂–∞–µ–º—ã—Ö —Ñ–∞–π–ª–æ–≤
7. **–õ–æ–≥–∏—Ä—É–π—Ç–µ** –æ—à–∏–±–∫–∏, –Ω–æ –Ω–µ —Å–µ–∫—Ä–µ—Ç—ã

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –ø–µ—Ä–µ–¥ –∫–æ–º–º–∏—Ç–æ–º

- [ ] –ù–µ—Ç —Å–µ–∫—Ä–µ—Ç–æ–≤ –≤ –∫–æ–¥–µ
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω .env.example
- [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–∞ –≤–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- [ ] –û–±—Ä–∞–±–æ—Ç–∞–Ω—ã –æ—à–∏–±–∫–∏
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è Preview –∏ PDF (–µ—Å–ª–∏ –º–µ–Ω—è–ª–∞—Å—å)
- [ ] –û–±–Ω–æ–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–≤–æ–¥—ã –≤ ru-RU.json –∏ en-US.json (–µ—Å–ª–∏ –¥–æ–±–∞–≤–ª—è–ª—Å—è —Ç–µ–∫—Å—Ç)

## –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (Support Chat)

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —á–∞—Ç–∞
1. **–í–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å** (—Å–∞–π—Ç) ‚Üí —Å–∏–Ω—è—è –∫–Ω–æ–ø–∫–∞ —á–∞—Ç–∞ ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ
2. **Frontend** (`UserChat.tsx`) ‚Üí POST `/api/user-send` ‚Üí Backend
3. **Backend** (`index.js`) ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –≤ Map ‚Üí –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—É
4. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** (Telegram) ‚Üí –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
5. **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä** ‚Üí `/reply <userId> –¢–µ–∫—Å—Ç –æ—Ç–≤–µ—Ç–∞`
6. **Backend** ‚Üí —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –æ—Ç–≤–µ—Ç –≤ Map
7. **Frontend** ‚Üí polling GET `/api/user-messages/<userId>` –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã ‚Üí –≤–∏–¥–∏—Ç –æ—Ç–≤–µ—Ç

### API Endpoints

**GET `/api/user-messages/:userId`**
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç: `{ messages: [{ from: 'user'|'admin', text: string, timestamp: number }] }`

**POST `/api/user-send`**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –≤–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Body: `{ userId: string, message: string }`
- –î–µ–π—Å—Ç–≤–∏—è: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ, –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤ Telegram –∞–¥–º–∏–Ω—É

**GET `/api/sessions`**
- –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –∞–∫—Ç–∏–≤–Ω—ã–µ —Å–µ—Å—Å–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (–¥–ª—è –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏)
- –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å–µ—Å—Å–∏–π —Å —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏

**POST `/api/send`**
- –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –∞–¥–º–∏–Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- Body: `{ chatId: string, message: string }`

### Telegram Bot Commands

**`/start`** - –ù–∞—á–∞—Ç—å —á–∞—Ç —Å –±–æ—Ç–æ–º (–¥–ª—è Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

**`/reply <userId> <—Ç–µ–∫—Å—Ç>`** - –û—Ç–≤–µ—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
- –ü—Ä–∏–º–µ—Ä: `/reply web_1760035933883_ccpcesgtz –ü—Ä–∏–≤–µ—Ç!`
- –î–ª—è –≤–µ–±-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (ID –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `web_`) —Å–æ–æ–±—â–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ
- –î–ª—è Telegram-–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (—á–∏—Å–ª–æ–≤–æ–π ID) –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞

**`/users`** - –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º —Å–æ–æ–±—â–µ–Ω–∏–π

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

**UserID –≥–µ–Ω–µ—Ä–∞—Ü–∏—è:**
```typescript
const userId = `web_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`
localStorage.setItem('chatUserId', userId)
```

**Polling –¥–ª—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:**
- –ö–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
- –ù–æ–≤—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –ª–æ–∫–∞–ª—å–Ω—ã–π state
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–æ–ª–ª –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é

**–†–∞–∑–ª–∏—á–∏–µ –º–µ–∂–¥—É —Ç–∏–ø–∞–º–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π:**
- `web_...` - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Å —Å–∞–π—Ç–∞ (—Å–æ–æ–±—â–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –±–∞–∑–µ)
- –ß–∏—Å–ª–æ–≤–æ–π ID - Telegram –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (—Å–æ–æ–±—â–µ–Ω–∏—è —á–µ—Ä–µ–∑ –±–æ—Ç–∞)

### Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

**–í–ê–ñ–ù–û:** `/api/*` –¥–æ–ª–∂–µ–Ω –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –∫ –±—ç–∫–µ–Ω–¥—É —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º `/api/` –≤ –ø—É—Ç–∏!

```nginx
location /api/ {
    proxy_pass http://localhost:3002/api/;  # –í–∞–∂–Ω–æ: /api/ –≤ –∫–æ–Ω—Ü–µ!
    proxy_http_version 1.1;
    proxy_set_header Upgrade $http_upgrade;
    proxy_set_header Connection "upgrade";
    proxy_set_header Host $host;
    # ... –æ—Å—Ç–∞–ª—å–Ω—ã–µ –∑–∞–≥–æ–ª–æ–≤–∫–∏
}
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

```env
# Backend
TELEGRAM_BOT_TOKEN=your_bot_token
ADMIN_CHAT_ID=your_telegram_id
PORT=3001

# Frontend
VITE_API_URL=https://yourdomain.com/api
```

## –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

### –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- Preview –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ä–µ–∞–ª—å–Ω—ã–µ —Ä–∞–∑–º–µ—Ä—ã DOM —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –¥–ª—è —Ç–æ—á–Ω—ã—Ö —Ä–∞—Å—á–µ—Ç–æ–≤
- PDF –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫—É—é –æ—Ü–µ–Ω–∫—É –≤—ã—Å–æ—Ç—ã —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–π
- –ï—Å–ª–∏ –ø–∞–≥–∏–Ω–∞—Ü–∏—è –Ω–µ —Å–æ–≤–ø–∞–¥–∞–µ—Ç, –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã –≤—ã—Å–æ—Ç –≤ –æ–±–æ–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö

### –®—Ä–∏—Ñ—Ç—ã
- Preview: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–∏—Å—Ç–µ–º–Ω—ã–π —à—Ä–∏—Ñ—Ç —á–µ—Ä–µ–∑ Tailwind
- PDF: –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Roboto (–∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∏–∑ CDN)
- –†–∞–∑–Ω–∏—Ü–∞ –≤ —à—Ä–∏—Ñ—Ç–∞—Ö –º–æ–∂–µ—Ç –≤–ª–∏—è—Ç—å –Ω–∞ –≤—ã—Å–æ—Ç—É —Ç–µ–∫—Å—Ç–∞

### –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è
- Preview: –º–∞–∫—Å–∏–º—É–º 190px x 190px
- PDF: –º–∞–∫—Å–∏–º—É–º 142pt x 142pt (~189px x 189px)
- –°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–æ–≤ –¥–æ–ª–∂–Ω–æ –æ—Å—Ç–∞–≤–∞—Ç—å—Å—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–º

### –ß–∞—Ç –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- –°–æ–æ–±—â–µ–Ω–∏—è —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –ø–∞–º—è—Ç–∏ (Map), –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ —Ç–µ—Ä—è—é—Ç—Å—è
- –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Redis –∏–ª–∏ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
- Polling –∫–∞–∂–¥—ã–µ 3 —Å–µ–∫—É–Ω–¥—ã - –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è WebSocket
- Web userID –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —Å–ª—É—á–∞–π–Ω–æ –∏ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage

---

**–í–ê–ñ–ù–û**: –≠—Ç–æ—Ç —Ñ–∞–π–ª —Å–ª—É–∂–∏—Ç –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏–µ–º –æ –ø—Ä–∞–≤–∏–ª–∞—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –°–ª–µ–¥—É–π—Ç–µ —ç—Ç–∏–º –ø—Ä–∏–Ω—Ü–∏–ø–∞–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å –ø—Ä–æ–µ–∫—Ç–æ–º!